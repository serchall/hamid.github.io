# تنظیمات اعلان‌های زنده

## 📋 معرفی

سیستم تنظیمات اعلان‌های زنده به کاربران امکان شخصی‌سازی کامل تجربه اعلان‌ها را می‌دهد. این سیستم شامل گزینه‌های مختلف برای کنترل نحوه نمایش، صدا و انواع اعلان‌ها است.

## ✨ ویژگی‌های تنظیمات

### **🔧 کنترل‌های اصلی:**
- ✅ **فعال/غیرفعال کردن اعلان‌ها**: کنترل کلی سیستم اعلان‌ها
- ✅ **صدای اعلان**: فعال/غیرفعال کردن صدای اعلان
- ✅ **اعلان‌های مرورگر**: نمایش اعلان‌ها در سیستم عامل
- ✅ **اعلان‌های موبایل**: تنظیمات خاص موبایل

### **🎛️ تنظیمات نمایش:**
- ✅ **مدت نمایش**: 3، 5، 10 ثانیه یا بدون حذف خودکار
- ✅ **موقعیت نمایش**: 5 موقعیت مختلف (بالا-راست، بالا-چپ، پایین-راست، پایین-چپ، وسط)
- ✅ **بلندی صدا**: کنترل صدا از 0 تا 100 درصد

### **📱 انواع اعلان‌ها:**
- ✅ **پیام‌های جدید**: کنترل اعلان‌های چت
- ✅ **درخواست‌های دوستی**: کنترل اعلان‌های دوستی
- ✅ **خریدهای موفق**: کنترل اعلان‌های خرید
- ✅ **اعلان‌های سیستمی**: کنترل اعلان‌های عمومی

## 🚀 نحوه استفاده

### **1. دسترسی به تنظیمات:**
```
http://localhost:3000/settings.html
```

### **2. تنظیمات اصلی:**
- **فعال کردن اعلان‌های زنده**: کنترل کلی سیستم
- **صدای اعلان**: پخش صدای کوتاه
- **اعلان‌های مرورگر**: نیاز به مجوز مرورگر
- **اعلان‌های موبایل**: تنظیمات خاص موبایل

### **3. تنظیمات نمایش:**
- **مدت نمایش**: انتخاب زمان نمایش اعلان‌ها
- **موقعیت**: انتخاب محل نمایش در صفحه
- **بلندی صدا**: تنظیم صدا با اسلایدر

### **4. انواع اعلان‌ها:**
- انتخاب انواع اعلان‌هایی که می‌خواهید دریافت کنید

## 🎨 موقعیت‌های نمایش

### **موقعیت‌های موجود:**
1. **بالا-راست** (پیش‌فرض): گوشه بالا-راست صفحه
2. **بالا-چپ**: گوشه بالا-چپ صفحه
3. **پایین-راست**: گوشه پایین-راست صفحه
4. **پایین-چپ**: گوشه پایین-چپ صفحه
5. **وسط**: مرکز صفحه

### **انیمیشن‌های موقعیت:**
- هر موقعیت انیمیشن ورود و خروج مخصوص خود را دارد
- اعلان‌ها از جهت مناسب وارد و خارج می‌شوند
- سازگار با موبایل و دسکتاپ

## 🔊 تنظیمات صدا

### **کنترل صدا:**
- **اسلایدر صدا**: تنظیم بلندی از 0 تا 100 درصد
- **پیش‌نمایش**: نمایش درصد صدا در زمان تنظیم
- **ذخیره خودکار**: تنظیمات فوراً ذخیره می‌شوند

### **انواع صدا:**
- **صدای پیش‌فرض**: صدای کوتاه و ملایم
- **Web Audio API**: استفاده از API پیشرفته مرورگر
- **سازگاری**: پشتیبانی از مرورگرهای مختلف

## 📱 اعلان‌های مرورگر

### **مجوز اعلان:**
- **درخواست مجوز**: دکمه مخصوص درخواست مجوز
- **وضعیت مجوز**: نمایش وضعیت فعلی
- **راهنمایی**: راهنمای فعال‌سازی در صورت رد شدن

### **ویژگی‌های اعلان مرورگر:**
- **نمایش در سیستم عامل**: حتی وقتی مرورگر بسته است
- **کلیک روی اعلان**: هدایت مستقیم به صفحه مربوطه
- **آیکون سفارشی**: استفاده از آیکون سایت
- **مدت نمایش**: مطابق با تنظیمات کاربر

## 🛠️ توابع JavaScript

### **راه‌اندازی تنظیمات:**
```javascript
function setupNotificationSettings() {
    // بارگذاری تنظیمات ذخیره شده
    // تنظیم مقادیر اولیه
    // اضافه کردن event listeners
}
```

### **به‌روزرسانی تنظیمات:**
```javascript
function updateSettings() {
    // جمع‌آوری مقادیر از فرم
    // به‌روزرسانی تنظیمات
    // اعمال تغییرات
}
```

### **تست اعلان:**
```javascript
function testNotification() {
    // نمایش اعلان تست
    // بررسی عملکرد تنظیمات
}
```

### **درخواست مجوز:**
```javascript
async function requestNotificationPermission() {
    // درخواست مجوز از مرورگر
    // مدیریت پاسخ
    // به‌روزرسانی وضعیت
}
```

## 💾 ذخیره تنظیمات

### **localStorage:**
```javascript
// ذخیره تنظیمات
localStorage.setItem('notificationSettings', JSON.stringify(settings));

// بارگذاری تنظیمات
const settings = JSON.parse(localStorage.getItem('notificationSettings'));
```

### **تنظیمات پیش‌فرض:**
```javascript
const defaultSettings = {
    enableNotifications: true,
    enableSound: true,
    enableDesktopNotifications: false,
    enableMobileNotifications: true,
    notificationDuration: 5,
    notificationPosition: 'top-right',
    notificationVolume: 30,
    notifyTypes: {
        message: true,
        friend_request: true,
        purchase: true,
        system: true
    }
};
```

## 🎯 قابلیت‌های پیشرفته

### **✅ پیاده‌سازی شده:**
- تنظیمات کامل اعلان‌ها
- ذخیره خودکار تنظیمات
- اعلان‌های مرورگر
- کنترل صدا
- موقعیت‌های مختلف
- تست اعلان

### **🔄 در حال توسعه:**
- [ ] تنظیمات پیشرفته صدا
- [ ] تم‌های مختلف اعلان
- [ ] زمان‌بندی اعلان‌ها
- [ ] فیلترهای پیشرفته

### **📋 برنامه آینده:**
- [ ] تنظیمات گروهی
- [ ] پروفایل‌های تنظیمات
- [ ] همگام‌سازی تنظیمات
- [ ] آمار استفاده

## 📊 عملکرد

### **بهینه‌سازی‌ها:**
- ذخیره فوری تنظیمات
- اعمال تغییرات بدون ری‌لود
- مدیریت حافظه بهینه
- سازگاری با مرورگرهای مختلف

### **محدودیت‌ها:**
- نیاز به HTTPS برای اعلان‌های مرورگر
- محدودیت‌های مرورگر در برخی تنظیمات
- نیاز به مجوز کاربر برای اعلان‌های مرورگر

## 🛠️ عیب‌یابی

### **مشکلات رایج:**

#### تنظیمات ذخیره نمی‌شوند
```
مشکل: localStorage غیرفعال است
راه‌حل: بررسی تنظیمات مرورگر
```

#### اعلان‌های مرورگر کار نمی‌کنند
```
مشکل: مجوز رد شده یا HTTPS نیست
راه‌حل: درخواست مجوز مجدد یا استفاده از HTTPS
```

#### صدا کار نمی‌کند
```
مشکل: Web Audio API پشتیبانی نمی‌شود
راه‌حل: استفاده از مرورگر مدرن
```

### **لاگ‌های مفید:**
```javascript
// بررسی تنظیمات
console.log('تنظیمات فعلی:', liveNotifications.getSettings());

// بررسی وضعیت مجوز
console.log('وضعیت مجوز:', liveNotifications.getNotificationPermissionStatus());

// تست تنظیمات
liveNotifications.testNotification();
```

## 🔄 به‌روزرسانی‌ها

### **نسخه 1.0 (فعلی):**
- ✅ تنظیمات پایه اعلان‌ها
- ✅ کنترل صدا
- ✅ موقعیت‌های مختلف
- ✅ اعلان‌های مرورگر

### **نسخه 1.1 (آینده):**
- [ ] تنظیمات پیشرفته
- [ ] تم‌های مختلف
- [ ] زمان‌بندی

### **نسخه 1.2 (آینده):**
- [ ] پروفایل‌های تنظیمات
- [ ] همگام‌سازی
- [ ] آمار و گزارش‌گیری

## 📞 پشتیبانی

برای سوالات و مشکلات:
1. بررسی تنظیمات مرورگر
2. تست اعلان
3. بررسی مجوزها
4. مراجعه به مستندات

---

**نکته**: تنظیمات اعلان‌ها برای هر کاربر به صورت جداگانه ذخیره می‌شود و در تمام صفحات اعمال می‌شود. 