# ุณุณุชู ูพุงูโุฑุณุงู ุขููุงู

## ๐ ููุฑุณุช ูุทุงูุจ
- [ูุนุฑู](#ูุนุฑู)
- [ูฺฺฏโูุง](#ูฺฺฏูุง)
- [ูุนูุงุฑ](#ูุนูุงุฑ)
- [ูุตุจ ู ุฑุงูโุงูุฏุงุฒ](#ูุตุจ-ู-ุฑุงูุงูุฏุงุฒ)
- [ุงุณุชูุงุฏู](#ุงุณุชูุงุฏู)
- [API Endpoints](#api-endpoints)
- [WebSocket Events](#websocket-events)
- [ุฏุชุงุจุณ](#ุฏุชุงุจุณ)
- [ุงููุช](#ุงููุช)

## ๐ฏ ูุนุฑู

ุณุณุชู ูพุงูโุฑุณุงู ุขููุงู ฺฉ ูพูุชูุฑู ฺุช ฺฉุงูู ุจุง ูุงุจูุชโูุง ูุฑุฏ ู ฺฏุฑูู ุงุณุช ฺฉู ุงุฒ WebSocket ุจุฑุง ุงุฑุชุจุงุท ุจูุงุฏุฑูฺฏ ุงุณุชูุงุฏู ูโฺฉูุฏ. ุงู ุณุณุชู ุงูฺฉุงู ุงุฑุณุงู ูพุงูโูุง ูุชูุ ุชุตุงูุฑ ู ูุงูโูุง ุฑุง ูุฑุงูู ูโฺฉูุฏ.

## โจ ูฺฺฏโูุง

### **ฺุชโูุง ูุฑุฏ ู ฺฏุฑูู:**
- ุงุฌุงุฏ ฺุชโูุง ูุฑุฏ ุจู ุฏู ฺฉุงุฑุจุฑ
- ุงุฌุงุฏ ฺุชโูุง ฺฏุฑูู ุจุง ฺูุฏู ุนุถู
- ูุฏุฑุช ุงุนุถุง ฺฏุฑูู

### **ูพุงูโุฑุณุงู ุจูุงุฏุฑูฺฏ:**
- ุงุฑุณุงู ู ุฏุฑุงูุช ูพุงูโูุง ุฏุฑ ุฒูุงู ูุงูุน
- ูุดุงูฺฏุฑ ุชุงูพ ฺฉุฑุฏู
- ูุถุนุช ุฎูุงูุฏู ุดุฏู ูพุงูโูุง

### **ุงููุงุน ูพุงู:**
- ูพุงูโูุง ูุชู
- ุงุฑุณุงู ุชุตุงูุฑ
- ุงุฑุณุงู ูุงูโูุง ูุฎุชูู

### **ูฺฺฏโูุง ุงุถุงู:**
- ููุงุด ุชุนุฏุงุฏ ูพุงูโูุง ูุฎูุงูุฏู
- ุขูุงุชุงุฑ ฺฉุงุฑุจุฑุงู
- ูุดุงูฺฏุฑ ุขููุงู ุจูุฏู
- ุฑุงุจุท ฺฉุงุฑุจุฑ ูุฏุฑู ู ูุงฺฉูุดโฺฏุฑุง

## ๐๏ธ ูุนูุงุฑ

### **Frontend:**
- HTML5 + CSS3 + JavaScript
- Bootstrap ุจุฑุง UI
- Socket.IO Client
- ุทุฑุงุญ ูุงฺฉูุดโฺฏุฑุง

### **Backend:**
- Node.js + Express
- Socket.IO ุจุฑุง WebSocket
- SQLite ุจุฑุง ุฏุชุงุจุณ
- JWT ุจุฑุง ุงุญุฑุงุฒ ููุช

### **ุงุฑุชุจุงุท:**
- WebSocket ุจุฑุง ูพุงูโูุง ุจูุงุฏุฑูฺฏ
- REST API ุจุฑุง ุนููุงุช CRUD
- ุงุญุฑุงุฒ ููุช JWT

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1. ูุตุจ Dependencies
```bash
npm install socket.io
```

### 2. ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ
ุฌุฏุงูู ุฒุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฌุงุฏ ูโุดููุฏ:

```sql
-- ุฌุฏูู ฺุชโูุง
CREATE TABLE conversations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT,
    type TEXT DEFAULT 'individual',
    createdBy INTEGER,
    createdAt DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- ุฌุฏูู ุดุฑฺฉุชโฺฉููุฏฺฏุงู
CREATE TABLE conversation_participants (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    conversationId INTEGER,
    userId INTEGER,
    joinedAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    isAdmin INTEGER DEFAULT 0
);

-- ุฌุฏูู ูพุงูโูุง
CREATE TABLE messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    conversationId INTEGER,
    senderId INTEGER,
    content TEXT NOT NULL,
    messageType TEXT DEFAULT 'text',
    fileUrl TEXT,
    isRead INTEGER DEFAULT 0,
    createdAt DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- ุฌุฏูู ุฎูุงูุฏู ุดุฏู ูพุงูโูุง
CREATE TABLE message_reads (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    messageId INTEGER,
    userId INTEGER,
    readAt DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### 3. ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ
```bash
npm start
```

## ๐ฑ ุงุณุชูุงุฏู

### 1. ุฏุณุชุฑุณ ุจู ูพุงูโุฑุณุงู
```
http://localhost:3000/messenger.html
```

### 2. ุงุฌุงุฏ ฺุช ุฌุฏุฏ
1. ฺฉูฺฉ ุฑู ุฏฺฉูู "ฺุช ุฌุฏุฏ"
2. ุงูุชุฎุงุจ ููุน ฺุช (ูุฑุฏ ุง ฺฏุฑูู)
3. ุงูุชุฎุงุจ ฺฉุงุฑุจุฑุงู
4. ุจุฑุง ฺฏุฑููโูุง: ูุงุฑุฏ ฺฉุฑุฏู ูุงู ฺฏุฑูู
5. ฺฉูฺฉ ุฑู "ุงุฌุงุฏ ฺุช"

### 3. ุงุฑุณุงู ูพุงู
1. ุงูุชุฎุงุจ ฺุช ุงุฒ ูุณุช
2. ููุดุชู ูพุงู ุฏุฑ ููุฏ ูุฑูุฏ
3. ฺฉูฺฉ ุฑู ุฏฺฉูู ุงุฑุณุงู ุง ูุดุฑุฏู Enter

### 4. ุงุฑุณุงู ูุงู
1. ฺฉูฺฉ ุฑู ุขฺฉูู ฺฏุฑู ฺฉุงุบุฐ
2. ุงูุชุฎุงุจ ูุงู
3. ูุงู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุขูพููุฏ ู ุงุฑุณุงู ูโุดูุฏ

## ๐ API Endpoints

### GET /api/conversations
ุฏุฑุงูุช ูุณุช ฺุชโูุง ฺฉุงุฑุจุฑ

**Headers:**
```
Authorization: Bearer <token>
```

**Response:**
```json
{
    "success": true,
    "conversations": [
        {
            "id": 1,
            "name": "ฺุช ฺฏุฑูู",
            "type": "group",
            "unreadCount": 3,
            "lastMessage": "ุณูุงู ููู",
            "lastMessageTime": "2024-01-01T12:00:00Z"
        }
    ]
}
```

### POST /api/conversations
ุงุฌุงุฏ ฺุช ุฌุฏุฏ

**Request:**
```json
{
    "type": "group",
    "name": "ฺุช ฺฏุฑูู ุฌุฏุฏ",
    "participants": [1, 2, 3]
}
```

**Response:**
```json
{
    "success": true,
    "conversationId": 1
}
```

### GET /api/conversations/:id/messages
ุฏุฑุงูุช ูพุงูโูุง ฺุช

**Query Parameters:**
- `page`: ุดูุงุฑู ุตูุญู (ูพุดโูุฑุถ: 1)
- `limit`: ุชุนุฏุงุฏ ูพุงู ุฏุฑ ูุฑ ุตูุญู (ูพุดโูุฑุถ: 50)

**Response:**
```json
{
    "success": true,
    "messages": [
        {
            "id": 1,
            "content": "ุณูุงู",
            "senderId": 1,
            "senderName": "ุนู",
            "senderAvatar": "avatar.jpg",
            "messageType": "text",
            "createdAt": "2024-01-01T12:00:00Z"
        }
    ]
}
```

### POST /api/conversations/:id/participants
ุงุถุงูู ฺฉุฑุฏู ุนุถู ุจู ฺฏุฑูู

**Request:**
```json
{
    "userIds": [4, 5]
}
```

### DELETE /api/conversations/:id/participants/:userId
ุญุฐู ุนุถู ุงุฒ ฺฏุฑูู

## ๐ WebSocket Events

### Client to Server

#### authenticate
ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ
```javascript
socket.emit('authenticate', { token: 'jwt_token' });
```

#### join_conversation
ูพูุณุชู ุจู ฺุช
```javascript
socket.emit('join_conversation', conversationId);
```

#### leave_conversation
ุชุฑฺฉ ฺุช
```javascript
socket.emit('leave_conversation', conversationId);
```

#### send_message
ุงุฑุณุงู ูพุงู
```javascript
socket.emit('send_message', {
    conversationId: 1,
    content: 'ุณูุงู',
    messageType: 'text'
});
```

#### typing
ูุดุงู ุฏุงุฏู ุชุงูพ ฺฉุฑุฏู
```javascript
socket.emit('typing', { conversationId: 1 });
```

#### stop_typing
ุชููู ูุดุงูฺฏุฑ ุชุงูพ
```javascript
socket.emit('stop_typing', { conversationId: 1 });
```

#### mark_read
ุนูุงูุชโฺฏุฐุงุฑ ูพุงูโูุง ุจู ุนููุงู ุฎูุงูุฏู ุดุฏู
```javascript
socket.emit('mark_read', { conversationId: 1 });
```

### Server to Client

#### conversations
ุฏุฑุงูุช ูุณุช ฺุชโูุง
```javascript
socket.on('conversations', (conversations) => {
    // ุจูโุฑูุฒุฑุณุงู ูุณุช ฺุชโูุง
});
```

#### new_message
ูพุงู ุฌุฏุฏ
```javascript
socket.on('new_message', (message) => {
    // ููุงุด ูพุงู ุฌุฏุฏ
});
```

#### user_typing
ฺฉุงุฑุจุฑ ุฏุฑ ุญุงู ุชุงูพ
```javascript
socket.on('user_typing', (data) => {
    // ููุงุด ูุดุงูฺฏุฑ ุชุงูพ
});
```

#### user_stop_typing
ุชููู ุชุงูพ ฺฉุงุฑุจุฑ
```javascript
socket.on('user_stop_typing', (data) => {
    // ูุฎู ฺฉุฑุฏู ูุดุงูฺฏุฑ ุชุงูพ
});
```

#### messages_read
ูพุงูโูุง ุฎูุงูุฏู ุดุฏู
```javascript
socket.on('messages_read', (data) => {
    // ุจูโุฑูุฒุฑุณุงู ูุถุนุช ูพุงูโูุง
});
```

#### notification
ุงุนูุงู ุฌุฏุฏ
```javascript
socket.on('notification', (data) => {
    // ููุงุด ุงุนูุงู
});
```

## ๐๏ธ ุฏุชุงุจุณ

### ุฌุฏุงูู ุงุตู

#### conversations
| ุณุชูู | ููุน | ุชูุถุญ |
|------|-----|-------|
| id | INTEGER | ุดูุงุณู ฺฉุชุง |
| name | TEXT | ูุงู ฺุช (ุจุฑุง ฺฏุฑููโูุง) |
| type | TEXT | ููุน ฺุช (individual/group) |
| createdBy | INTEGER | ุดูุงุณู ุณุงุฒูุฏู |
| createdAt | DATETIME | ุชุงุฑุฎ ุงุฌุงุฏ |

#### conversation_participants
| ุณุชูู | ููุน | ุชูุถุญ |
|------|-----|-------|
| id | INTEGER | ุดูุงุณู ฺฉุชุง |
| conversationId | INTEGER | ุดูุงุณู ฺุช |
| userId | INTEGER | ุดูุงุณู ฺฉุงุฑุจุฑ |
| joinedAt | DATETIME | ุชุงุฑุฎ ูพูุณุชู |
| isAdmin | INTEGER | ุขุง ุงุฏูู ุงุณุช |

#### messages
| ุณุชูู | ููุน | ุชูุถุญ |
|------|-----|-------|
| id | INTEGER | ุดูุงุณู ฺฉุชุง |
| conversationId | INTEGER | ุดูุงุณู ฺุช |
| senderId | INTEGER | ุดูุงุณู ูุฑุณุชูุฏู |
| content | TEXT | ูุญุชูุง ูพุงู |
| messageType | TEXT | ููุน ูพุงู (text/image/file) |
| fileUrl | TEXT | ุขุฏุฑุณ ูุงู |
| isRead | INTEGER | ุขุง ุฎูุงูุฏู ุดุฏู |
| createdAt | DATETIME | ุชุงุฑุฎ ุงุฑุณุงู |

## ๐ ุงููุช

### ุงุญุฑุงุฒ ููุช
- ุงุณุชูุงุฏู ุงุฒ JWT ุจุฑุง ุงุญุฑุงุฒ ููุช
- ุจุฑุฑุณ ุชูฺฉู ุฏุฑ ุชูุงู ุฏุฑุฎูุงุณุชโูุง
- ุงุญุฑุงุฒ ููุช WebSocket

### ูุฌูุฒูุง
- ููุท ุงุนุถุง ฺุช ูโุชูุงููุฏ ูพุงู ุงุฑุณุงู ฺฉููุฏ
- ููุท ุงุฏููโูุง ูโุชูุงููุฏ ุงุนุถุง ุฑุง ูุฏุฑุช ฺฉููุฏ
- ุจุฑุฑุณ ุฏุณุชุฑุณ ูุจู ุงุฒ ูุฑ ุนููุงุช

### ูุญุงูุธุช ุงุฒ ุฏุงุฏูโูุง
- ูพุงฺฉโุณุงุฒ ูุฑูุฏ ฺฉุงุฑุจุฑุงู
- ูุญุฏูุฏุช ุงูุฏุงุฒู ูุงูโูุง
- ุจุฑุฑุณ ููุน ูุงูโูุง ูุฌุงุฒ

## ๐จ ุฑุงุจุท ฺฉุงุฑุจุฑ

### ูฺฺฏโูุง UI
- ุทุฑุงุญ ูุฏุฑู ู ุฒุจุง
- ุงููุดูโูุง ูุฑู
- ูุงฺฉูุดโฺฏุฑุง ุจุฑุง ููุจุงู
- ุญุงูุช ุชุงุฑฺฉ
- ุงุณฺฉุฑูู ุจุงุฑ ุณูุงุฑุด

### ฺฉุงููพูููุชโูุง
- ูุณุช ฺุชโูุง
- ูพูุฌุฑู ฺุช
- ูุฑู ุงุฑุณุงู ูพุงู
- ููุฏุงูโูุง ูุฏุฑุช
- ูุดุงูฺฏุฑูุง ูุถุนุช

## ๐ ุนููฺฉุฑุฏ

### ุจูููโุณุงุฒโูุง
- ูพุงูโูุง ุตูุญูโุจูุฏ ุดุฏู
- ููุฏ ุชูุจู ุชุตุงูุฑ
- ฺฉุด ฺฉุฑุฏู ุฏุงุฏูโูุง
- ุจูููโุณุงุฒ ฺฉูุฆุฑโูุง

### ูุญุฏูุฏุชโูุง
- ุญุฏุงฺฉุซุฑ 50 ูพุงู ุฏุฑ ูุฑ ุตูุญู
- ุญุฏุงฺฉุซุฑ 10MB ุจุฑุง ูุงูโูุง
- ุญุฏุงฺฉุซุฑ 100 ุนุถู ุฏุฑ ฺฏุฑูู

## ๐๏ธ ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ

#### ุงุชุตุงู WebSocket
```
ุฎุทุง: Connection failed
ุฑุงูโุญู: ุจุฑุฑุณ ุชูุธูุงุช ุณุฑูุฑ ู ูุงุฑูุงู
```

#### ุนุฏู ุฏุฑุงูุช ูพุงูโูุง
```
ูุดฺฉู: ูพุงูโูุง ุฏุฑุงูุช ููโุดููุฏ
ุฑุงูโุญู: ุจุฑุฑุณ ุงุญุฑุงุฒ ููุช ู ุนุถูุช ุฏุฑ ฺุช
```

#### ูุดฺฉู ุขูพููุฏ ูุงู
```
ุฎุทุง: File upload failed
ุฑุงูโุญู: ุจุฑุฑุณ ูุฌูุฒูุง ูพูุดู uploads
```

### ูุงฺฏโูุง ููุฏ
```javascript
// ูุงฺฏ ุงุชุตุงู ฺฉุงุฑุจุฑ
console.log('๐ User connected:', socket.id);

// ูุงฺฏ ุงุฑุณุงู ูพุงู
console.log('๐ฌ Message sent:', messageId);

// ูุงฺฏ ุฎุทุงูุง
console.error('โ Socket error:', error);
```

## ๐ ุจูโุฑูุฒุฑุณุงูโูุง ุขูุฏู

### ูฺฺฏโูุง ูพุดููุงุฏ
- **ูพุงูโูุง ุตูุช**: ุงุฑุณุงู ู ูพุฎุด ูพุงูโูุง ุตูุช
- **ุชูุงุณ ุชุตูุฑ**: ุชูุงุณ ูุฏู ุจู ฺฉุงุฑุจุฑุงู
- **ูุงฺฉูุดโูุง**: ูุงฺฉ ู ูุงฺฉูุด ุจู ูพุงูโูุง
- **ูพุงูโูุง ูููุช**: ูพุงูโูุง ฺฉู ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดููุฏ
- **ุฌุณุชุฌู**: ุฌุณุชุฌู ุฏุฑ ูพุงูโูุง ู ฺุชโูุง

### ุจูุจูุฏูุง ูู
- **Redis**: ฺฉุด ฺฉุฑุฏู ุจุฑุง ุนููฺฉุฑุฏ ุจูุชุฑ
- **ูุดุฑุฏูโุณุงุฒ**: ูุดุฑุฏูโุณุงุฒ ูพุงูโูุง
- **ุฑูุฒูฺฏุงุฑ**: ุฑูุฒูฺฏุงุฑ end-to-end
- **Push Notifications**: ุงุนูุงูโูุง push
- **Backup**: ูพุดุชุจุงูโฺฏุฑ ุฎูุฏฺฉุงุฑ

---

**ูฺฉุชู**: ุงู ุณุณุชู ุจุฑุง ูุญุทโูุง production ูุงุฒ ุจู ุชูุธูุงุช ุงุถุงู ุงููุช ู ุจูููโุณุงุฒ ุฏุงุฑุฏ. 